---
title: "리팩터링: 리팩터링 원칙(1)"
excerpt: "리팩터링 정의~두 개의 모자"

categories:
  - refactoring
tags:
  - [refactoring]

toc: true
toc_sticky: true

date: 2022-03-22
last_modified_at: 2022-03-22
---

## 2. 리팩터링 원칙

### 2.1 리팩터링 정의

- 명사: 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법
  - 함수 추출하기
  - 조건부 로직을 다형성으로 바꾸기
- 동사: 소프트웨어의 겉보기 동작은 그대로 유지한 채, 여러 가지 리팩터링 기법을 적용해서 소프트웨어를 재구성한다.
- 누군가 '리팩터링하다가 코드가 깨져서 고생했다.'라고 한다면 그것은 리팩터링 한 것이 아니다.
- 사용자 관점에서 달라지는 점이 없어야 한다.
- 버그 역시 리팩터링 후에도 그대로 남아 있어야 한다.
- 리팩터링은 성능 최적화와 비슷하다.
  - 둘 다 코드를 변경하지만 프로그램의 전반적인 기능은 그대로 유지한다.
  - **목적이 다르다**
- 리팩터링의 목적: 코드를 이해하고 수정하기 쉽게 만드는 것이다.
- 성능 최적화의 목적: 속도 개선에만 신경쓴다.

### 2.2 두 개의 모자

- 목적을 구분하라.
  - 기능 추가인가?
  - 리팩터링인가?
  - 기능을 추가할 때는 '기능 추가' 모자를 쓴 다음 기존 코드는 절대로 건들지 않고 새 기능을 추가하기만 한다.
    - 진척도는 테스트를 추가해서 통과하는지 확인한다.
  - 리팩터링할 때는 '리팩터링' 모자를 쓴 다음 기능 추가는 절대로 하지 않으며 코드 재구성에만 전념한다.
    - 테스트도 새로 만들지 않는다.
    - 부득이 인터페이스를 변경해야 할 때만 테스트를 추가한다.
